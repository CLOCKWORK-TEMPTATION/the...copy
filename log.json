2025-11-21T10:37:07.13633216Z ==> ///////////////////////////////////////////////////////////
2025-11-21T10:37:08.121556629Z {"timestamp":"2025-11-21T10:37:08.121Z","level":"warn","message":"ðŸš¨ CORS violation detected from origin: undefined","service":"the-copy-backend"}
2025-11-21T10:37:08.122735336Z {"timestamp":"2025-11-21T10:37:08.122Z","level":"error","message":"Unhandled error: Not allowed by CORS","service":"the-copy-backend","stack":"Error: Not allowed by CORS\n    at origin (/opt/render/project/src/backend/dist/middleware/index.js:54:30)\n    at /opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:204:7)\n    at Layer.handleRequest (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:342:13)\n    at /opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:297:9\n    at processParams (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:582:12)\n    at next (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:291:5)\n    at internalNext (/opt/render/project/src/node_modules/.pnpm/helmet@8.1.0/node_modules/helmet/index.cjs:531:6)"}
2025-11-21T10:37:33.583687527Z {"timestamp":"2025-11-21T10:37:33.581Z","level":"error","message":"[MongoDB] Connection failed: 80BC4F6EB97B0000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:../deps/openssl/openssl/ssl/record/rec_layer_s3.c:1605:SSL alert number 80\n","service":"the-copy-backend","errorLabelSet":{},"reason":{"type":"ReplicaSetNoPrimary","servers":{"ac-thlikra-shard-00-02.ckhubzh.mongodb.net:27017":{"address":"ac-thlikra-shard-00-02.ckhubzh.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":620781595,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"ac-thlikra-shard-00-00.ckhubzh.mongodb.net:27017":{"address":"ac-thlikra-shard-00-00.ckhubzh.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":620781387,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"ac-thlikra-shard-00-01.ckhubzh.mongodb.net:27017":{"address":"ac-thlikra-shard-00-01.ckhubzh.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":620781578,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false}},"stale":false,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"setName":"atlas-rflyum-shard-0","maxElectionId":null,"maxSetVersion":null,"commonWireVersion":0,"logicalSessionTimeoutMinutes":null},"stack":"MongoServerSelectionError: 80BC4F6EB97B0000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:../deps/openssl/openssl/ssl/record/rec_layer_s3.c:1605:SSL alert number 80\n\n    at Topology.selectServer (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/sdam/topology.js:346:38)\n    at async Topology._connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/sdam/topology.js:219:28)\n    at async Topology.connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/sdam/topology.js:171:13)\n    at async topologyConnect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/mongo_client.js:258:17)\n    at async MongoClient._connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/mongo_client.js:271:13)\n    at async MongoClient.connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/mongo_client.js:196:13)\n    at async connectMongoDB (/opt/render/project/src/backend/dist/config/mongodb.js:24:13)\n    at async /opt/render/project/src/backend/dist/server.js:88:9","cause":{"errorLabelSet":{},"beforeHandshake":false}}
2025-11-21T10:37:33.586123342Z {"timestamp":"2025-11-21T10:37:33.583Z","level":"error","message":"Failed to initialize MongoDB: 80BC4F6EB97B0000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:../deps/openssl/openssl/ssl/record/rec_layer_s3.c:1605:SSL alert number 80\n","service":"the-copy-backend","errorLabelSet":{},"reason":{"type":"ReplicaSetNoPrimary","servers":{"ac-thlikra-shard-00-02.ckhubzh.mongodb.net:27017":{"address":"ac-thlikra-shard-00-02.ckhubzh.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":620781595,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"ac-thlikra-shard-00-00.ckhubzh.mongodb.net:27017":{"address":"ac-thlikra-shard-00-00.ckhubzh.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":620781387,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"ac-thlikra-shard-00-01.ckhubzh.mongodb.net:27017":{"address":"ac-thlikra-shard-00-01.ckhubzh.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":620781578,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false}},"stale":false,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"setName":"atlas-rflyum-shard-0","maxElectionId":null,"maxSetVersion":null,"commonWireVersion":0,"logicalSessionTimeoutMinutes":null},"stack":"MongoServerSelectionError: 80BC4F6EB97B0000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:../deps/openssl/openssl/ssl/record/rec_layer_s3.c:1605:SSL alert number 80\n\n    at Topology.selectServer (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/sdam/topology.js:346:38)\n    at async Topology._connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/sdam/topology.js:219:28)\n    at async Topology.connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/sdam/topology.js:171:13)\n    at async topologyConnect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/mongo_client.js:258:17)\n    at async MongoClient._connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/mongo_client.js:271:13)\n    at async MongoClient.connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/mongo_client.js:196:13)\n    at async connectMongoDB (/opt/render/project/src/backend/dist/config/mongodb.js:24:13)\n    at async /opt/render/project/src/backend/dist/server.js:88:9","cause":{"errorLabelSet":{},"beforeHandshake":false}}
2025-11-21T10:42:09.218080683Z ==> Detected service running on port 3001
2025-11-21T10:42:09.508901951Z ==> Docs on specifying a port: https://render.com/docs/web-services#port-binding
2025-11-21T10:46:59.629645504Z {"timestamp":"2025-11-21T10:46:59.629Z","level":"warn","message":"ðŸš¨ CORS violation detected from origin: undefined","service":"the-copy-backend"}
2025-11-21T10:46:59.630111161Z {"timestamp":"2025-11-21T10:46:59.629Z","level":"error","message":"Unhandled error: Not allowed by CORS","service":"the-copy-backend","stack":"Error: Not allowed by CORS\n    at origin (/opt/render/project/src/backend/dist/middleware/index.js:54:30)\n    at /opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:204:7)\n    at Layer.handleRequest (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:342:13)\n    at /opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:297:9\n    at processParams (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:582:12)\n    at next (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:291:5)\n    at internalNext (/opt/render/project/src/node_modules/.pnpm/helmet@8.1.0/node_modules/helmet/index.cjs:531:6)"}
2025-11-21T10:47:00.033772544Z {"timestamp":"2025-11-21T10:47:00.033Z","level":"warn","message":"ðŸš¨ CORS violation detected from origin: undefined","service":"the-copy-backend"}
2025-11-21T10:47:00.034277411Z {"timestamp":"2025-11-21T10:47:00.034Z","level":"error","message":"Unhandled error: Not allowed by CORS","service":"the-copy-backend","stack":"Error: Not allowed by CORS\n    at origin (/opt/render/project/src/backend/dist/middleware/index.js:54:30)\n    at /opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:204:7)\n    at Layer.handleRequest (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:342:13)\n    at /opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:297:9\n    at processParams (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:582:12)\n    at next (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:291:5)\n    at internalNext (/opt/render/project/src/node_modules/.pnpm/helmet@8.1.0/node_modules/helmet/index.cjs:531:6)"}
2025-11-21T11:03:03.325462021Z SIGTERM received, closing queues...
2025-11-21T11:03:03.353463622Z [QueueManager] Closing all queues and workers...
2025-11-21T11:03:03.353495013Z {"timestamp":"2025-11-21T11:03:03.326Z","level":"info","message":"SIGTERM received, shutting down gracefully","service":"the-copy-backend"}
2025-11-21T11:03:03.353501353Z {"timestamp":"2025-11-21T11:03:03.326Z","level":"info","message":"[SSE] Shutting down service...","service":"the-copy-backend"}
2025-11-21T11:03:03.353505863Z {"timestamp":"2025-11-21T11:03:03.326Z","level":"info","message":"[SSE] Service shut down successfully","service":"the-copy-backend"}
2025-11-21T11:03:03.353510233Z {"timestamp":"2025-11-21T11:03:03.327Z","level":"info","message":"[WebSocket] Shutting down service...","service":"the-copy-backend"}
2025-11-21T11:03:03.353514573Z {"timestamp":"2025-11-21T11:03:03.328Z","level":"info","message":"[MongoDB] Connection closed","service":"the-copy-backend"}
2025-11-21T13:31:13.978571544Z ==> Deploying...
2025-11-21T13:34:51.436224434Z ==> No open ports detected, continuing to scan...
2025-11-21T13:34:51.542832568Z ==> Docs on specifying a port: https://render.com/docs/web-services#port-binding
2025-11-21T13:35:00.44397948Z ==> Running 'node dist/server.js'
2025-11-21T13:35:02.045481639Z [dotenv@17.2.3] injecting env (0) from .env -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }
2025-11-21T13:35:13.940982324Z [Sentry] Backend monitoring initialized
2025-11-21T13:35:14.040199405Z {"timestamp":"2025-11-21T13:35:13.950Z","level":"info","message":"[WebSocket] Service initialized successfully","service":"the-copy-backend"}
2025-11-21T13:35:14.04101613Z {"timestamp":"2025-11-21T13:35:14.040Z","level":"info","message":"WebSocket service initialized","service":"the-copy-backend"}
2025-11-21T13:35:14.042432556Z [QueueSystem] Initializing workers...
2025-11-21T13:35:14.051505427Z {"timestamp":"2025-11-21T13:35:14.051Z","level":"info","message":"[BullBoard] Dashboard initialized at /admin/queues","service":"the-copy-backend"}
2025-11-21T13:35:14.051909614Z {"timestamp":"2025-11-21T13:35:14.051Z","level":"info","message":"[BullBoard] Authentication enabled for dashboard","service":"the-copy-backend"}
2025-11-21T13:35:14.0522457Z {"timestamp":"2025-11-21T13:35:14.051Z","level":"info","message":"Bull Board dashboard available at /admin/queues (authenticated)","service":"the-copy-backend"}
2025-11-21T13:35:14.145271055Z {"timestamp":"2025-11-21T13:35:14.144Z","level":"info","message":"Server running on port 3001","service":"the-copy-backend","environment":"production","port":3001,"websocket":"enabled","sse":"enabled"}
2025-11-21T13:35:14.254481323Z {"timestamp":"2025-11-21T13:35:14.254Z","level":"info","message":"Redis cache connected successfully","service":"the-copy-backend"}
2025-11-21T13:35:14.507470196Z {"timestamp":"2025-11-21T13:35:14.507Z","level":"info","message":"[QueueSystem] Redis version 8.2.1 is compatible with BullMQ","service":"the-copy-backend"}
2025-11-21T13:35:14.509366922Z [AIAnalysis] Worker registered
2025-11-21T13:35:14.539588149Z [DocumentProcessing] Worker registered
2025-11-21T13:35:14.540372533Z {"timestamp":"2025-11-21T13:35:14.540Z","level":"info","message":"[CacheWarming] Worker registered","service":"the-copy-backend"}
2025-11-21T13:35:14.540564747Z [QueueSystem] All workers initialized
2025-11-21T13:35:14.540772011Z {"timestamp":"2025-11-21T13:35:14.540Z","level":"info","message":"Background job workers initialized","service":"the-copy-backend"}
2025-11-21T13:35:14.544265236Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T13:35:14.545994109Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T13:35:14.735895849Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T13:35:14.761086172Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T13:35:14.765584926Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T13:35:14.768679194Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T13:35:14.77061553Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T13:35:14.772168759Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T13:35:14.79679687Z ==> Your service is live ðŸŽ‰
2025-11-21T13:35:14.831763506Z ==> 
2025-11-21T13:35:14.863841102Z ==> ///////////////////////////////////////////////////////////
2025-11-21T13:35:14.900333819Z ==> 
2025-11-21T13:35:14.934686755Z ==> Available at your primary URL https://thecopy-backend.onrender.com
2025-11-21T13:35:14.969074821Z ==> 
2025-11-21T13:35:15.005076297Z ==> ///////////////////////////////////////////////////////////
2025-11-21T13:35:15.00953086Z {"timestamp":"2025-11-21T13:35:15.009Z","level":"info","message":"Database connection established successfully","service":"the-copy-backend","maxConnections":20,"environment":"production","attempt":1}
2025-11-21T13:35:15.061086647Z {"timestamp":"2025-11-21T13:35:15.060Z","level":"warn","message":"ðŸš¨ CORS violation detected from origin: undefined","service":"the-copy-backend"}
2025-11-21T13:35:15.063209127Z {"timestamp":"2025-11-21T13:35:15.062Z","level":"error","message":"Unhandled error: Not allowed by CORS","service":"the-copy-backend","stack":"Error: Not allowed by CORS\n    at origin (/opt/render/project/src/backend/dist/middleware/index.js:54:30)\n    at /opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:204:7)\n    at Layer.handleRequest (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:342:13)\n    at /opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:297:9\n    at processParams (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:582:12)\n    at next (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:291:5)\n    at internalNext (/opt/render/project/src/node_modules/.pnpm/helmet@8.1.0/node_modules/helmet/index.cjs:531:6)"}
2025-11-21T13:35:16.390560175Z {"timestamp":"2025-11-21T13:35:16.390Z","level":"warn","message":"ðŸš¨ CORS violation detected from origin: undefined","service":"the-copy-backend"}
2025-11-21T13:35:16.391766968Z {"timestamp":"2025-11-21T13:35:16.391Z","level":"error","message":"Unhandled error: Not allowed by CORS","service":"the-copy-backend","stack":"Error: Not allowed by CORS\n    at origin (/opt/render/project/src/backend/dist/middleware/index.js:54:30)\n    at /opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:204:7)\n    at Layer.handleRequest (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:342:13)\n    at /opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:297:9\n    at processParams (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:582:12)\n    at next (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:291:5)\n    at internalNext (/opt/render/project/src/node_modules/.pnpm/helmet@8.1.0/node_modules/helmet/index.cjs:531:6)"}
2025-11-21T13:35:44.254367081Z {"timestamp":"2025-11-21T13:35:44.252Z","level":"error","message":"[MongoDB] Connection failed: 806CDE7580780000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:../deps/openssl/openssl/ssl/record/rec_layer_s3.c:1605:SSL alert number 80\n","service":"the-copy-backend","errorLabelSet":{},"reason":{"type":"ReplicaSetNoPrimary","servers":{"ac-thlikra-shard-00-02.ckhubzh.mongodb.net:27017":{"address":"ac-thlikra-shard-00-02.ckhubzh.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":23035953,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"ac-thlikra-shard-00-00.ckhubzh.mongodb.net:27017":{"address":"ac-thlikra-shard-00-00.ckhubzh.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":23035945,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"ac-thlikra-shard-00-01.ckhubzh.mongodb.net:27017":{"address":"ac-thlikra-shard-00-01.ckhubzh.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":23036000,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false}},"stale":false,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"setName":"atlas-rflyum-shard-0","maxElectionId":null,"maxSetVersion":null,"commonWireVersion":0,"logicalSessionTimeoutMinutes":null},"stack":"MongoServerSelectionError: 806CDE7580780000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:../deps/openssl/openssl/ssl/record/rec_layer_s3.c:1605:SSL alert number 80\n\n    at Topology.selectServer (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/sdam/topology.js:346:38)\n    at async Topology._connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/sdam/topology.js:219:28)\n    at async Topology.connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/sdam/topology.js:171:13)\n    at async topologyConnect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/mongo_client.js:258:17)\n    at async MongoClient._connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/mongo_client.js:271:13)\n    at async MongoClient.connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/mongo_client.js:196:13)\n    at async connectMongoDB (/opt/render/project/src/backend/dist/config/mongodb.js:24:13)\n    at async /opt/render/project/src/backend/dist/server.js:88:9","cause":{"errorLabelSet":{},"beforeHandshake":false}}
2025-11-21T13:35:44.255441091Z {"timestamp":"2025-11-21T13:35:44.254Z","level":"error","message":"Failed to initialize MongoDB: 806CDE7580780000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:../deps/openssl/openssl/ssl/record/rec_layer_s3.c:1605:SSL alert number 80\n","service":"the-copy-backend","errorLabelSet":{},"reason":{"type":"ReplicaSetNoPrimary","servers":{"ac-thlikra-shard-00-02.ckhubzh.mongodb.net:27017":{"address":"ac-thlikra-shard-00-02.ckhubzh.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":23035953,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"ac-thlikra-shard-00-00.ckhubzh.mongodb.net:27017":{"address":"ac-thlikra-shard-00-00.ckhubzh.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":23035945,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"ac-thlikra-shard-00-01.ckhubzh.mongodb.net:27017":{"address":"ac-thlikra-shard-00-01.ckhubzh.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":23036000,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false}},"stale":false,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"setName":"atlas-rflyum-shard-0","maxElectionId":null,"maxSetVersion":null,"commonWireVersion":0,"logicalSessionTimeoutMinutes":null},"stack":"MongoServerSelectionError: 806CDE7580780000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:../deps/openssl/openssl/ssl/record/rec_layer_s3.c:1605:SSL alert number 80\n\n    at Topology.selectServer (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/sdam/topology.js:346:38)\n    at async Topology._connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/sdam/topology.js:219:28)\n    at async Topology.connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/sdam/topology.js:171:13)\n    at async topologyConnect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/mongo_client.js:258:17)\n    at async MongoClient._connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/mongo_client.js:271:13)\n    at async MongoClient.connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/mongo_client.js:196:13)\n    at async connectMongoDB (/opt/render/project/src/backend/dist/config/mongodb.js:24:13)\n    at async /opt/render/project/src/backend/dist/server.js:88:9","cause":{"errorLabelSet":{},"beforeHandshake":false}}
2025-11-21T13:40:21.977002958Z ==> Detected service running on port 3001
2025-11-21T13:40:22.221706224Z ==> Docs on specifying a port: https://render.com/docs/web-services#port-binding
2025-11-21T13:44:05.136242173Z {"timestamp":"2025-11-21T13:44:05.135Z","level":"warn","message":"ðŸš¨ CORS violation detected from origin: undefined","service":"the-copy-backend"}
2025-11-21T13:44:05.136796103Z {"timestamp":"2025-11-21T13:44:05.136Z","level":"error","message":"Unhandled error: Not allowed by CORS","service":"the-copy-backend","stack":"Error: Not allowed by CORS\n    at origin (/opt/render/project/src/backend/dist/middleware/index.js:54:30)\n    at /opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:204:7)\n    at Layer.handleRequest (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:342:13)\n    at /opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:297:9\n    at processParams (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:582:12)\n    at next (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:291:5)\n    at internalNext (/opt/render/project/src/node_modules/.pnpm/helmet@8.1.0/node_modules/helmet/index.cjs:531:6)"}
2025-11-21T13:47:50.896386492Z {"timestamp":"2025-11-21T13:47:50.896Z","level":"info","message":"[BullBoard] Dashboard initialized at /admin/queues","service":"the-copy-backend"}
2025-11-21T13:47:50.896946044Z {"timestamp":"2025-11-21T13:47:50.896Z","level":"info","message":"[BullBoard] Authentication enabled for dashboard","service":"the-copy-backend"}
2025-11-21T13:47:50.897374493Z {"timestamp":"2025-11-21T13:47:50.897Z","level":"info","message":"Bull Board dashboard available at /admin/queues (authenticated)","service":"the-copy-backend"}
2025-11-21T13:47:50.905490724Z {"timestamp":"2025-11-21T13:47:50.905Z","level":"info","message":"Server running on port 3001","service":"the-copy-backend","environment":"production","port":3001,"websocket":"enabled","sse":"enabled"}
2025-11-21T13:47:50.992024152Z {"timestamp":"2025-11-21T13:47:50.991Z","level":"warn","message":"Redis connection error, falling back to memory cache:","service":"the-copy-backend"}
2025-11-21T13:47:51.603496559Z {"timestamp":"2025-11-21T13:47:51.603Z","level":"info","message":"Redis cache connected successfully","service":"the-copy-backend"}
2025-11-21T13:47:51.715781351Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T13:47:51.719068011Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T13:47:51.754278944Z {"timestamp":"2025-11-21T13:47:51.753Z","level":"info","message":"[QueueSystem] Redis version 8.2.1 is compatible with BullMQ","service":"the-copy-backend"}
2025-11-21T13:47:51.757256327Z [AIAnalysis] Worker registered
2025-11-21T13:47:51.758234208Z [DocumentProcessing] Worker registered
2025-11-21T13:47:51.790278025Z {"timestamp":"2025-11-21T13:47:51.789Z","level":"info","message":"[CacheWarming] Worker registered","service":"the-copy-backend"}
2025-11-21T13:47:51.790788236Z [QueueSystem] All workers initialized
2025-11-21T13:47:51.791072562Z {"timestamp":"2025-11-21T13:47:51.790Z","level":"info","message":"Background job workers initialized","service":"the-copy-backend"}
2025-11-21T13:47:51.990712969Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T13:47:51.993536319Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T13:47:51.994186142Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T13:47:52.053835112Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T13:47:52.057638493Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T13:47:52.058330357Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T13:47:52.333696254Z {"timestamp":"2025-11-21T13:47:52.333Z","level":"info","message":"Database connection established successfully","service":"the-copy-backend","maxConnections":20,"environment":"production","attempt":1}
2025-11-21T13:47:58.26078637Z {"timestamp":"2025-11-21T13:47:58.260Z","level":"warn","message":"ðŸš¨ CORS violation detected from origin: undefined","service":"the-copy-backend"}
2025-11-21T13:47:58.261204338Z {"timestamp":"2025-11-21T13:47:58.261Z","level":"error","message":"Unhandled error: Not allowed by CORS","service":"the-copy-backend","stack":"Error: Not allowed by CORS\n    at origin (/opt/render/project/src/backend/dist/middleware/index.js:54:30)\n    at /opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:204:7)\n    at Layer.handleRequest (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:342:13)\n    at /opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:297:9\n    at processParams (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:582:12)\n    at next (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:291:5)\n    at internalNext (/opt/render/project/src/node_modules/.pnpm/helmet@8.1.0/node_modules/helmet/index.cjs:531:6)"}
2025-11-21T13:47:58.652261647Z {"timestamp":"2025-11-21T13:47:58.652Z","level":"warn","message":"ðŸš¨ CORS violation detected from origin: undefined","service":"the-copy-backend"}
2025-11-21T13:47:58.652708616Z {"timestamp":"2025-11-21T13:47:58.652Z","level":"error","message":"Unhandled error: Not allowed by CORS","service":"the-copy-backend","stack":"Error: Not allowed by CORS\n    at origin (/opt/render/project/src/backend/dist/middleware/index.js:54:30)\n    at /opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:204:7)\n    at Layer.handleRequest (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:342:13)\n    at /opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:297:9\n    at processParams (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:582:12)\n    at next (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:291:5)\n    at internalNext (/opt/render/project/src/node_modules/.pnpm/helmet@8.1.0/node_modules/helmet/index.cjs:531:6)"}
2025-11-21T13:48:21.200779373Z {"timestamp":"2025-11-21T13:48:21.195Z","level":"error","message":"[MongoDB] Connection failed: 80CC6B862C740000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:../deps/openssl/openssl/ssl/record/rec_layer_s3.c:1605:SSL alert number 80\n","service":"the-copy-backend","errorLabelSet":{},"reason":{"type":"ReplicaSetNoPrimary","servers":{"ac-thlikra-shard-00-01.ckhubzh.mongodb.net:27017":{"address":"ac-thlikra-shard-00-01.ckhubzh.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":1482099755,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"ac-thlikra-shard-00-02.ckhubzh.mongodb.net:27017":{"address":"ac-thlikra-shard-00-02.ckhubzh.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":1482099717,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"ac-thlikra-shard-00-00.ckhubzh.mongodb.net:27017":{"address":"ac-thlikra-shard-00-00.ckhubzh.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":1482099711,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false}},"stale":false,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"setName":"atlas-rflyum-shard-0","maxElectionId":null,"maxSetVersion":null,"commonWireVersion":0,"logicalSessionTimeoutMinutes":null},"stack":"MongoServerSelectionError: 80CC6B862C740000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:../deps/openssl/openssl/ssl/record/rec_layer_s3.c:1605:SSL alert number 80\n\n    at Topology.selectServer (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/sdam/topology.js:346:38)\n    at async Topology._connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/sdam/topology.js:219:28)\n    at async Topology.connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/sdam/topology.js:171:13)\n    at async topologyConnect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/mongo_client.js:258:17)\n    at async MongoClient._connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/mongo_client.js:271:13)\n    at async MongoClient.connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/mongo_client.js:196:13)\n    at async connectMongoDB (/opt/render/project/src/backend/dist/config/mongodb.js:24:13)\n    at async /opt/render/project/src/backend/dist/server.js:88:9","cause":{"errorLabelSet":{},"beforeHandshake":false}}
2025-11-21T13:48:21.202237594Z {"timestamp":"2025-11-21T13:48:21.201Z","level":"error","message":"Failed to initialize MongoDB: 80CC6B862C740000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:../deps/openssl/openssl/ssl/record/rec_layer_s3.c:1605:SSL alert number 80\n","service":"the-copy-backend","errorLabelSet":{},"reason":{"type":"ReplicaSetNoPrimary","servers":{"ac-thlikra-shard-00-01.ckhubzh.mongodb.net:27017":{"address":"ac-thlikra-shard-00-01.ckhubzh.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":1482099755,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"ac-thlikra-shard-00-02.ckhubzh.mongodb.net:27017":{"address":"ac-thlikra-shard-00-02.ckhubzh.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":1482099717,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"ac-thlikra-shard-00-00.ckhubzh.mongodb.net:27017":{"address":"ac-thlikra-shard-00-00.ckhubzh.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":1482099711,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false}},"stale":false,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"setName":"atlas-rflyum-shard-0","maxElectionId":null,"maxSetVersion":null,"commonWireVersion":0,"logicalSessionTimeoutMinutes":null},"stack":"MongoServerSelectionError: 80CC6B862C740000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:../deps/openssl/openssl/ssl/record/rec_layer_s3.c:1605:SSL alert number 80\n\n    at Topology.selectServer (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/sdam/topology.js:346:38)\n    at async Topology._connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/sdam/topology.js:219:28)\n    at async Topology.connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/sdam/topology.js:171:13)\n    at async topologyConnect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/mongo_client.js:258:17)\n    at async MongoClient._connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/mongo_client.js:271:13)\n    at async MongoClient.connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/mongo_client.js:196:13)\n    at async connectMongoDB (/opt/render/project/src/backend/dist/config/mongodb.js:24:13)\n    at async /opt/render/project/src/backend/dist/server.js:88:9","cause":{"errorLabelSet":{},"beforeHandshake":false}}
2025-11-21T13:49:00.204884056Z SIGTERM received, closing queues...
2025-11-21T13:49:00.205010429Z [QueueManager] Closing all queues and workers...
2025-11-21T13:49:00.205019519Z {"timestamp":"2025-11-21T13:49:00.202Z","level":"info","message":"SIGTERM received, shutting down gracefully","service":"the-copy-backend"}
2025-11-21T13:49:00.205024659Z {"timestamp":"2025-11-21T13:49:00.203Z","level":"info","message":"[SSE] Shutting down service...","service":"the-copy-backend"}
2025-11-21T13:49:00.205029199Z {"timestamp":"2025-11-21T13:49:00.203Z","level":"info","message":"[SSE] Service shut down successfully","service":"the-copy-backend"}
2025-11-21T13:49:00.2050624Z {"timestamp":"2025-11-21T13:49:00.203Z","level":"info","message":"[WebSocket] Shutting down service...","service":"the-copy-backend"}
2025-11-21T13:49:00.240667422Z {"timestamp":"2025-11-21T13:49:00.239Z","level":"info","message":"[MongoDB] Connection closed","service":"the-copy-backend"}
2025-11-21T13:50:15.853786822Z ==> Deploying...
2025-11-21T13:51:46.175254988Z ==> No open ports detected, continuing to scan...
2025-11-21T13:51:46.296027277Z ==> Docs on specifying a port: https://render.com/docs/web-services#port-binding
2025-11-21T13:51:56.197489221Z ==> Running 'node dist/server.js'
2025-11-21T13:51:58.290521856Z [dotenv@17.2.3] injecting env (0) from .env -- tip: âœ… audit secrets and track compliance: https://dotenvx.com/ops
2025-11-21T13:52:12.103956575Z [Sentry] Backend monitoring initialized
2025-11-21T13:52:12.290255187Z {"timestamp":"2025-11-21T13:52:12.204Z","level":"info","message":"[WebSocket] Service initialized successfully","service":"the-copy-backend"}
2025-11-21T13:52:12.291203865Z {"timestamp":"2025-11-21T13:52:12.291Z","level":"info","message":"WebSocket service initialized","service":"the-copy-backend"}
2025-11-21T13:52:12.292776046Z [QueueSystem] Initializing workers...
2025-11-21T13:52:12.390548867Z {"timestamp":"2025-11-21T13:52:12.319Z","level":"info","message":"[BullBoard] Dashboard initialized at /admin/queues","service":"the-copy-backend"}
2025-11-21T13:52:12.41697632Z {"timestamp":"2025-11-21T13:52:12.391Z","level":"info","message":"[BullBoard] Authentication enabled for dashboard","service":"the-copy-backend"}
2025-11-21T13:52:12.416988721Z {"timestamp":"2025-11-21T13:52:12.391Z","level":"info","message":"Bull Board dashboard available at /admin/queues (authenticated)","service":"the-copy-backend"}
2025-11-21T13:52:12.49051986Z {"timestamp":"2025-11-21T13:52:12.400Z","level":"info","message":"Server running on port 3001","service":"the-copy-backend","environment":"production","port":3001,"websocket":"enabled","sse":"enabled"}
2025-11-21T13:52:12.493768713Z {"timestamp":"2025-11-21T13:52:12.493Z","level":"warn","message":"Redis connection error, falling back to memory cache:","service":"the-copy-backend"}
2025-11-21T13:52:12.897749568Z {"timestamp":"2025-11-21T13:52:12.897Z","level":"warn","message":"ðŸš¨ CORS violation detected from origin: undefined","service":"the-copy-backend"}
2025-11-21T13:52:12.900669794Z {"timestamp":"2025-11-21T13:52:12.899Z","level":"error","message":"Unhandled error: Not allowed by CORS","service":"the-copy-backend","stack":"Error: Not allowed by CORS\n    at origin (/opt/render/project/src/backend/dist/middleware/index.js:54:30)\n    at /opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:204:7)\n    at Layer.handleRequest (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:342:13)\n    at /opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:297:9\n    at processParams (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:582:12)\n    at next (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:291:5)\n    at internalNext (/opt/render/project/src/node_modules/.pnpm/helmet@8.1.0/node_modules/helmet/index.cjs:531:6)"}
2025-11-21T13:52:13.420374878Z {"timestamp":"2025-11-21T13:52:13.420Z","level":"info","message":"[QueueSystem] Redis version 8.2.1 is compatible with BullMQ","service":"the-copy-backend"}
2025-11-21T13:52:13.422342727Z [AIAnalysis] Worker registered
2025-11-21T13:52:13.422917168Z [DocumentProcessing] Worker registered
2025-11-21T13:52:13.423463818Z {"timestamp":"2025-11-21T13:52:13.423Z","level":"info","message":"[CacheWarming] Worker registered","service":"the-copy-backend"}
2025-11-21T13:52:13.423616471Z [QueueSystem] All workers initialized
2025-11-21T13:52:13.423709363Z {"timestamp":"2025-11-21T13:52:13.423Z","level":"info","message":"Background job workers initialized","service":"the-copy-backend"}
2025-11-21T13:52:13.425677321Z {"timestamp":"2025-11-21T13:52:13.425Z","level":"info","message":"Redis cache connected successfully","service":"the-copy-backend"}
2025-11-21T13:52:13.594954412Z {"timestamp":"2025-11-21T13:52:13.592Z","level":"info","message":"Database connection established successfully","service":"the-copy-backend","maxConnections":20,"environment":"production","attempt":1}
2025-11-21T13:52:13.596589754Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T13:52:13.597800858Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T13:52:13.791438952Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T13:52:13.793855299Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T13:52:13.795506422Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T13:52:13.800535789Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T13:52:13.802220762Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T13:52:13.803797833Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T13:52:21.909149517Z ==> Your service is live ðŸŽ‰
2025-11-21T13:52:21.947483833Z ==> 
2025-11-21T13:52:21.989133388Z ==> ///////////////////////////////////////////////////////////
2025-11-21T13:52:22.024435555Z ==> 
2025-11-21T13:52:22.566177279Z ==> Available at your primary URL https://thecopy-backend.onrender.com
2025-11-21T13:52:22.600333125Z ==> 
2025-11-21T13:52:22.635159712Z ==> ///////////////////////////////////////////////////////////
2025-11-21T13:52:23.753206794Z {"timestamp":"2025-11-21T13:52:23.752Z","level":"warn","message":"ðŸš¨ CORS violation detected from origin: undefined","service":"the-copy-backend"}
2025-11-21T13:52:23.754441668Z {"timestamp":"2025-11-21T13:52:23.754Z","level":"error","message":"Unhandled error: Not allowed by CORS","service":"the-copy-backend","stack":"Error: Not allowed by CORS\n    at origin (/opt/render/project/src/backend/dist/middleware/index.js:54:30)\n    at /opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:204:7)\n    at Layer.handleRequest (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:342:13)\n    at /opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:297:9\n    at processParams (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:582:12)\n    at next (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:291:5)\n    at internalNext (/opt/render/project/src/node_modules/.pnpm/helmet@8.1.0/node_modules/helmet/index.cjs:531:6)"}
2025-11-21T13:52:42.696373336Z {"timestamp":"2025-11-21T13:52:42.694Z","level":"error","message":"[MongoDB] Connection failed: 800C8BB993770000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:../deps/openssl/openssl/ssl/record/rec_layer_s3.c:1605:SSL alert number 80\n","service":"the-copy-backend","errorLabelSet":{},"reason":{"type":"ReplicaSetNoPrimary","servers":{"ac-thlikra-shard-00-00.ckhubzh.mongodb.net:27017":{"address":"ac-thlikra-shard-00-00.ckhubzh.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":1464466570,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"ac-thlikra-shard-00-01.ckhubzh.mongodb.net:27017":{"address":"ac-thlikra-shard-00-01.ckhubzh.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":1464466361,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"ac-thlikra-shard-00-02.ckhubzh.mongodb.net:27017":{"address":"ac-thlikra-shard-00-02.ckhubzh.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":1464466164,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false}},"stale":false,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"setName":"atlas-rflyum-shard-0","maxElectionId":null,"maxSetVersion":null,"commonWireVersion":0,"logicalSessionTimeoutMinutes":null},"stack":"MongoServerSelectionError: 800C8BB993770000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:../deps/openssl/openssl/ssl/record/rec_layer_s3.c:1605:SSL alert number 80\n\n    at Topology.selectServer (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/sdam/topology.js:346:38)\n    at async Topology._connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/sdam/topology.js:219:28)\n    at async Topology.connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/sdam/topology.js:171:13)\n    at async topologyConnect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/mongo_client.js:258:17)\n    at async MongoClient._connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/mongo_client.js:271:13)\n    at async MongoClient.connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/mongo_client.js:196:13)\n    at async connectMongoDB (/opt/render/project/src/backend/dist/config/mongodb.js:24:13)\n    at async /opt/render/project/src/backend/dist/server.js:88:9","cause":{"errorLabelSet":{},"beforeHandshake":false}}
2025-11-21T13:52:42.697530478Z {"timestamp":"2025-11-21T13:52:42.696Z","level":"error","message":"Failed to initialize MongoDB: 800C8BB993770000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:../deps/openssl/openssl/ssl/record/rec_layer_s3.c:1605:SSL alert number 80\n","service":"the-copy-backend","errorLabelSet":{},"reason":{"type":"ReplicaSetNoPrimary","servers":{"ac-thlikra-shard-00-00.ckhubzh.mongodb.net:27017":{"address":"ac-thlikra-shard-00-00.ckhubzh.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":1464466570,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"ac-thlikra-shard-00-01.ckhubzh.mongodb.net:27017":{"address":"ac-thlikra-shard-00-01.ckhubzh.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":1464466361,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"ac-thlikra-shard-00-02.ckhubzh.mongodb.net:27017":{"address":"ac-thlikra-shard-00-02.ckhubzh.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":1464466164,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false}},"stale":false,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"setName":"atlas-rflyum-shard-0","maxElectionId":null,"maxSetVersion":null,"commonWireVersion":0,"logicalSessionTimeoutMinutes":null},"stack":"MongoServerSelectionError: 800C8BB993770000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:../deps/openssl/openssl/ssl/record/rec_layer_s3.c:1605:SSL alert number 80\n\n    at Topology.selectServer (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/sdam/topology.js:346:38)\n    at async Topology._connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/sdam/topology.js:219:28)\n    at async Topology.connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/sdam/topology.js:171:13)\n    at async topologyConnect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/mongo_client.js:258:17)\n    at async MongoClient._connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/mongo_client.js:271:13)\n    at async MongoClient.connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/mongo_client.js:196:13)\n    at async connectMongoDB (/opt/render/project/src/backend/dist/config/mongodb.js:24:13)\n    at async /opt/render/project/src/backend/dist/server.js:88:9","cause":{"errorLabelSet":{},"beforeHandshake":false}}
2025-11-21T13:53:21.702569279Z SIGTERM received, closing queues...
2025-11-21T13:53:21.702856615Z [QueueManager] Closing all queues and workers...
2025-11-21T13:53:21.703920517Z {"timestamp":"2025-11-21T13:53:21.703Z","level":"info","message":"SIGTERM received, shutting down gracefully","service":"the-copy-backend"}
2025-11-21T13:53:21.704458439Z {"timestamp":"2025-11-21T13:53:21.704Z","level":"info","message":"[SSE] Shutting down service...","service":"the-copy-backend"}
2025-11-21T13:53:21.704595531Z {"timestamp":"2025-11-21T13:53:21.704Z","level":"info","message":"[SSE] Service shut down successfully","service":"the-copy-backend"}
2025-11-21T13:53:21.704801926Z {"timestamp":"2025-11-21T13:53:21.704Z","level":"info","message":"[WebSocket] Shutting down service...","service":"the-copy-backend"}
2025-11-21T13:53:21.705984491Z {"timestamp":"2025-11-21T13:53:21.705Z","level":"info","message":"[MongoDB] Connection closed","service":"the-copy-backend"}
2025-11-21T13:57:17.548932177Z ==> Detected service running on port 3001
2025-11-21T13:57:17.690946309Z ==> Docs on specifying a port: https://render.com/docs/web-services#port-binding
2025-11-21T14:00:19.949046877Z ==> Deploying...
2025-11-21T14:02:18.290717972Z ==> No open ports detected, continuing to scan...
2025-11-21T14:02:18.378660403Z ==> Docs on specifying a port: https://render.com/docs/web-services#port-binding
2025-11-21T14:02:28.6919622Z ==> Running 'node dist/server.js'
2025-11-21T14:02:30.593715735Z [dotenv@17.2.3] injecting env (0) from .env -- tip: âš™ï¸  write to custom object with { processEnv: myObject }
2025-11-21T14:02:44.886881342Z [Sentry] Backend monitoring initialized
2025-11-21T14:02:44.92429989Z {"timestamp":"2025-11-21T14:02:44.897Z","level":"info","message":"[WebSocket] Service initialized successfully","service":"the-copy-backend"}
2025-11-21T14:02:44.925096527Z {"timestamp":"2025-11-21T14:02:44.924Z","level":"info","message":"WebSocket service initialized","service":"the-copy-backend"}
2025-11-21T14:02:44.988550258Z [QueueSystem] Initializing workers...
2025-11-21T14:02:45.00345047Z {"timestamp":"2025-11-21T14:02:45.002Z","level":"info","message":"[BullBoard] Dashboard initialized at /admin/queues","service":"the-copy-backend"}
2025-11-21T14:02:45.00390875Z {"timestamp":"2025-11-21T14:02:45.003Z","level":"info","message":"[BullBoard] Authentication enabled for dashboard","service":"the-copy-backend"}
2025-11-21T14:02:45.004485002Z {"timestamp":"2025-11-21T14:02:45.004Z","level":"info","message":"Bull Board dashboard available at /admin/queues (authenticated)","service":"the-copy-backend"}
2025-11-21T14:02:45.094816223Z {"timestamp":"2025-11-21T14:02:45.094Z","level":"info","message":"Server running on port 3001","service":"the-copy-backend","environment":"production","port":3001,"websocket":"enabled","sse":"enabled"}
2025-11-21T14:02:45.097584233Z {"timestamp":"2025-11-21T14:02:45.097Z","level":"warn","message":"Redis connection error, falling back to memory cache:","service":"the-copy-backend"}
2025-11-21T14:02:45.923182026Z {"timestamp":"2025-11-21T14:02:45.922Z","level":"info","message":"Redis cache connected successfully","service":"the-copy-backend"}
2025-11-21T14:02:45.990944169Z {"timestamp":"2025-11-21T14:02:45.990Z","level":"warn","message":"ðŸš¨ CORS violation detected from origin: undefined","service":"the-copy-backend"}
2025-11-21T14:02:45.992686217Z {"timestamp":"2025-11-21T14:02:45.992Z","level":"error","message":"Unhandled error: Not allowed by CORS","service":"the-copy-backend","stack":"Error: Not allowed by CORS\n    at origin (/opt/render/project/src/backend/dist/middleware/index.js:54:30)\n    at /opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:204:7)\n    at Layer.handleRequest (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:342:13)\n    at /opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:297:9\n    at processParams (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:582:12)\n    at next (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:291:5)\n    at internalNext (/opt/render/project/src/node_modules/.pnpm/helmet@8.1.0/node_modules/helmet/index.cjs:531:6)"}
2025-11-21T14:02:46.00025291Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T14:02:46.087820262Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T14:02:46.089425106Z {"timestamp":"2025-11-21T14:02:46.089Z","level":"info","message":"[QueueSystem] Redis version 8.2.1 is compatible with BullMQ","service":"the-copy-backend"}
2025-11-21T14:02:46.09145341Z [AIAnalysis] Worker registered
2025-11-21T14:02:46.092086814Z [DocumentProcessing] Worker registered
2025-11-21T14:02:46.092774209Z {"timestamp":"2025-11-21T14:02:46.092Z","level":"info","message":"[CacheWarming] Worker registered","service":"the-copy-backend"}
2025-11-21T14:02:46.092942412Z [QueueSystem] All workers initialized
2025-11-21T14:02:46.093073955Z {"timestamp":"2025-11-21T14:02:46.092Z","level":"info","message":"Background job workers initialized","service":"the-copy-backend"}
2025-11-21T14:02:46.309369697Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T14:02:46.311600955Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T14:02:46.312258359Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T14:02:46.314552099Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T14:02:46.354694556Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T14:02:46.356026985Z IMPORTANT! Eviction policy is volatile-lru. It should be "noeviction"
2025-11-21T14:02:46.423538813Z {"timestamp":"2025-11-21T14:02:46.423Z","level":"info","message":"Database connection established successfully","service":"the-copy-backend","maxConnections":20,"environment":"production","attempt":1}
2025-11-21T14:02:51.934821558Z ==> Your service is live ðŸŽ‰
2025-11-21T14:02:51.970945334Z ==> 
2025-11-21T14:02:52.002738971Z ==> ///////////////////////////////////////////////////////////
2025-11-21T14:02:52.035923357Z ==> 
2025-11-21T14:02:52.069310533Z ==> Available at your primary URL https://thecopy-backend.onrender.com
2025-11-21T14:02:52.10433521Z ==> 
2025-11-21T14:02:52.136473246Z ==> ///////////////////////////////////////////////////////////
2025-11-21T14:02:53.188054615Z {"timestamp":"2025-11-21T14:02:53.183Z","level":"warn","message":"ðŸš¨ CORS violation detected from origin: undefined","service":"the-copy-backend"}
2025-11-21T14:02:53.188077146Z {"timestamp":"2025-11-21T14:02:53.185Z","level":"error","message":"Unhandled error: Not allowed by CORS","service":"the-copy-backend","stack":"Error: Not allowed by CORS\n    at origin (/opt/render/project/src/backend/dist/middleware/index.js:54:30)\n    at /opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/opt/render/project/src/node_modules/.pnpm/cors@2.8.5/node_modules/cors/lib/index.js:204:7)\n    at Layer.handleRequest (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:342:13)\n    at /opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:297:9\n    at processParams (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:582:12)\n    at next (/opt/render/project/src/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:291:5)\n    at internalNext (/opt/render/project/src/node_modules/.pnpm/helmet@8.1.0/node_modules/helmet/index.cjs:531:6)"}
2025-11-21T14:03:15.297462308Z {"timestamp":"2025-11-21T14:03:15.294Z","level":"error","message":"[MongoDB] Connection failed: 802C384BC67A0000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:../deps/openssl/openssl/ssl/record/rec_layer_s3.c:1605:SSL alert number 80\n","service":"the-copy-backend","errorLabelSet":{},"reason":{"type":"ReplicaSetNoPrimary","servers":{"ac-thlikra-shard-00-00.ckhubzh.mongodb.net:27017":{"address":"ac-thlikra-shard-00-00.ckhubzh.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":1464959003,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"ac-thlikra-shard-00-01.ckhubzh.mongodb.net:27017":{"address":"ac-thlikra-shard-00-01.ckhubzh.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":1464959007,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"ac-thlikra-shard-00-02.ckhubzh.mongodb.net:27017":{"address":"ac-thlikra-shard-00-02.ckhubzh.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":1464959007,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false}},"stale":false,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"setName":"atlas-rflyum-shard-0","maxElectionId":null,"maxSetVersion":null,"commonWireVersion":0,"logicalSessionTimeoutMinutes":null},"stack":"MongoServerSelectionError: 802C384BC67A0000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:../deps/openssl/openssl/ssl/record/rec_layer_s3.c:1605:SSL alert number 80\n\n    at Topology.selectServer (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/sdam/topology.js:346:38)\n    at async Topology._connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/sdam/topology.js:219:28)\n    at async Topology.connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/sdam/topology.js:171:13)\n    at async topologyConnect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/mongo_client.js:258:17)\n    at async MongoClient._connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/mongo_client.js:271:13)\n    at async MongoClient.connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/mongo_client.js:196:13)\n    at async connectMongoDB (/opt/render/project/src/backend/dist/config/mongodb.js:24:13)\n    at async /opt/render/project/src/backend/dist/server.js:88:9","cause":{"errorLabelSet":{},"beforeHandshake":false}}
2025-11-21T14:03:15.299017971Z {"timestamp":"2025-11-21T14:03:15.297Z","level":"error","message":"Failed to initialize MongoDB: 802C384BC67A0000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:../deps/openssl/openssl/ssl/record/rec_layer_s3.c:1605:SSL alert number 80\n","service":"the-copy-backend","errorLabelSet":{},"reason":{"type":"ReplicaSetNoPrimary","servers":{"ac-thlikra-shard-00-00.ckhubzh.mongodb.net:27017":{"address":"ac-thlikra-shard-00-00.ckhubzh.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":1464959003,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"ac-thlikra-shard-00-01.ckhubzh.mongodb.net:27017":{"address":"ac-thlikra-shard-00-01.ckhubzh.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":1464959007,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"ac-thlikra-shard-00-02.ckhubzh.mongodb.net:27017":{"address":"ac-thlikra-shard-00-02.ckhubzh.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":1464959007,"lastWriteDate":0,"error":{"errorLabelSet":{},"beforeHandshake":false},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false}},"stale":false,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"setName":"atlas-rflyum-shard-0","maxElectionId":null,"maxSetVersion":null,"commonWireVersion":0,"logicalSessionTimeoutMinutes":null},"stack":"MongoServerSelectionError: 802C384BC67A0000:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error:../deps/openssl/openssl/ssl/record/rec_layer_s3.c:1605:SSL alert number 80\n\n    at Topology.selectServer (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/sdam/topology.js:346:38)\n    at async Topology._connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/sdam/topology.js:219:28)\n    at async Topology.connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/sdam/topology.js:171:13)\n    at async topologyConnect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/mongo_client.js:258:17)\n    at async MongoClient._connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/mongo_client.js:271:13)\n    at async MongoClient.connect (/opt/render/project/src/node_modules/.pnpm/mongodb@7.0.0_socks@2.8.7/node_modules/mongodb/lib/mongo_client.js:196:13)\n    at async connectMongoDB (/opt/render/project/src/backend/dist/config/mongodb.js:24:13)\n    at async /opt/render/project/src/backend/dist/server.js:88:9","cause":{"errorLabelSet":{},"beforeHandshake":false}}
2025-11-21T14:03:51.73092747Z SIGTERM received, closing queues...
2025-11-21T14:03:51.731302807Z [QueueManager] Closing all queues and workers...
2025-11-21T14:03:51.732364968Z {"timestamp":"2025-11-21T14:03:51.732Z","level":"info","message":"SIGTERM received, shutting down gracefully","service":"the-copy-backend"}
2025-11-21T14:03:51.732665224Z {"timestamp":"2025-11-21T14:03:51.732Z","level":"info","message":"[SSE] Shutting down service...","service":"the-copy-backend"}
2025-11-21T14:03:51.732770076Z {"timestamp":"2025-11-21T14:03:51.732Z","level":"info","message":"[SSE] Service shut down successfully","service":"the-copy-backend"}
2025-11-21T14:03:51.73300028Z {"timestamp":"2025-11-21T14:03:51.732Z","level":"info","message":"[WebSocket] Shutting down service...","service":"the-copy-backend"}
2025-11-21T14:03:51.734252385Z {"timestamp":"2025-11-21T14:03:51.734Z","level":"info","message":"[MongoDB] Connection closed","service":"the-copy-backend"}
2025-11-21T14:07:49.465855119Z ==> Detected service running on port 3001
2025-11-21T14:07:49.586728989Z ==> Docs on specifying a port: https://render.com/docs/web-services#port-binding