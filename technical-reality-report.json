{
  "executiveSummary": "This is a full-stack Drama Analysis and Screenplay Management Platform with AI capabilities.\n\nACTUAL PROJECT PURPOSE (derived from code analysis):\n- A web application for analyzing dramatic scripts using AI (Google Gemini)\n- Provides a \"Directors Studio\" for managing film/drama projects, scenes, characters, and shots\n- Implements a \"Seven Stations Pipeline\" for comprehensive script analysis\n- Supports real-time collaboration via WebSocket\n- Background job processing for intensive AI operations\n- Multi-language support (primary: Arabic, with RTL support)\n\nARCHITECTURE:\nLayered Architecture (MVC-like): Controllers → Services → Database\n- Backend: REST API built with Express.js + TypeScript\n- Frontend: Next.js 16 (App Router) with React 19\n- Monorepo structure managed with pnpm workspaces\n\nKEY CAPABILITIES (from code evidence):\n- AI Integration (Gemini)\n- AI-Powered Script Analysis\n- User Authentication & Authorization\n- Character Management\n- System Metrics & Monitoring\n- Project Management\n- Background Job Processing\n- Real-time Communication\n- Scene Management\n- Shot Planning\n- Actorai Arabic\n- Analysis\n- Arabic Creative Writing Studio\n- Arabic Prompt Engineering Studio\n- Brain Storm Ai\n- Brainstorm\n- Breakdown\n- Cinematography Studio\n- Development\n- Directors Studio\n- Editor\n- Metrics Dashboard\n- New\n- Ui\n\nRUNTIME:\n- Node.js Node.js 20.x\n- Package Manager: pnpm 10.20.0",
  "techStack": {
    "languages": [
      "JavaScript/TypeScript",
      "TypeScript"
    ],
    "frameworks": [
      "Express.js (Backend)",
      "Next.js 16.0.10 (Frontend)",
      "React ^19.2.1"
    ],
    "databases": [
      "PostgreSQL (via Drizzle ORM)",
      "Database Dialect: postgresql",
      "MongoDB",
      "Redis (Caching/Sessions)"
    ],
    "infrastructure": [
      "BullMQ (Job Queue)",
      "Socket.IO (WebSocket)",
      "Sentry (Error Monitoring)",
      "Vercel (Deployment)"
    ],
    "buildSystem": [
      "pnpm 10.20.0",
      "TypeScript Compiler (tsc)",
      "Next.js Build System"
    ],
    "runtime": [
      "Node.js 20.x"
    ]
  },
  "architecture": {
    "pattern": "Layered Architecture (MVC-like): Controllers → Services → Database",
    "entryPoints": [
      "backend/src/server.ts (Backend API Server)",
      "frontend/src/app/layout.tsx (Next.js App Router)",
      "frontend/src/app/page.tsx (Main Page)"
    ],
    "structure": {
      "backend": {
        "path": "backend/",
        "type": "Express.js REST API with TypeScript"
      },
      "frontend": {
        "path": "frontend/",
        "type": "Next.js 16 with App Router (React 19)"
      }
    },
    "dataFlow": [
      "HTTP Server created with Express",
      "WebSocket service initialized",
      "Background job workers (BullMQ) initialized",
      "API endpoints exposed via Express routes",
      "Request → Authentication Middleware → Controllers",
      "Controllers → Services → Database (PostgreSQL via Drizzle ORM)"
    ]
  },
  "dataModels": [
    {
      "name": "sessions",
      "fields": [
        {
          "name": "sid",
          "type": "varchar",
          "nullable": true,
          "primary": true
        },
        {
          "name": "sess",
          "type": "jsonb",
          "nullable": false
        },
        {
          "name": "expire",
          "type": "timestamp",
          "nullable": false
        }
      ],
      "relationships": []
    },
    {
      "name": "users",
      "fields": [
        {
          "name": "id",
          "type": "varchar",
          "nullable": true,
          "primary": true
        },
        {
          "name": "email",
          "type": "varchar",
          "nullable": false,
          "unique": true
        },
        {
          "name": "passwordHash",
          "type": "text",
          "nullable": false
        },
        {
          "name": "firstName",
          "type": "varchar",
          "nullable": true
        },
        {
          "name": "lastName",
          "type": "varchar",
          "nullable": true
        },
        {
          "name": "profileImageUrl",
          "type": "varchar",
          "nullable": true
        },
        {
          "name": "createdAt",
          "type": "timestamp",
          "nullable": false
        },
        {
          "name": "updatedAt",
          "type": "timestamp",
          "nullable": false
        }
      ],
      "relationships": [
        {
          "type": "one-to-many",
          "target": "projects",
          "field": "projects_set"
        }
      ]
    },
    {
      "name": "projects",
      "fields": [
        {
          "name": "id",
          "type": "varchar",
          "nullable": true,
          "primary": true
        },
        {
          "name": "title",
          "type": "text",
          "nullable": false
        },
        {
          "name": "scriptContent",
          "type": "text",
          "nullable": true
        },
        {
          "name": "userId",
          "type": "varchar",
          "nullable": true,
          "references": "users"
        },
        {
          "name": "createdAt",
          "type": "timestamp",
          "nullable": false
        },
        {
          "name": "updatedAt",
          "type": "timestamp",
          "nullable": false
        }
      ],
      "relationships": [
        {
          "type": "many-to-one",
          "target": "users",
          "field": "userId"
        },
        {
          "type": "one-to-many",
          "target": "scenes",
          "field": "scenes_set"
        },
        {
          "type": "one-to-many",
          "target": "characters",
          "field": "characters_set"
        }
      ]
    },
    {
      "name": "scenes",
      "fields": [
        {
          "name": "id",
          "type": "varchar",
          "nullable": true,
          "primary": true
        },
        {
          "name": "projectId",
          "type": "varchar",
          "nullable": false,
          "references": "projects"
        },
        {
          "name": "sceneNumber",
          "type": "integer",
          "nullable": false
        },
        {
          "name": "title",
          "type": "text",
          "nullable": false
        },
        {
          "name": "location",
          "type": "text",
          "nullable": false
        },
        {
          "name": "timeOfDay",
          "type": "text",
          "nullable": false
        },
        {
          "name": "characters",
          "type": "jsonb",
          "nullable": false
        },
        {
          "name": "description",
          "type": "text",
          "nullable": true
        },
        {
          "name": "shotCount",
          "type": "integer",
          "nullable": false
        },
        {
          "name": "status",
          "type": "text",
          "nullable": false
        }
      ],
      "relationships": [
        {
          "type": "many-to-one",
          "target": "projects",
          "field": "projectId"
        },
        {
          "type": "one-to-many",
          "target": "shots",
          "field": "shots_set"
        }
      ]
    },
    {
      "name": "characters",
      "fields": [
        {
          "name": "id",
          "type": "varchar",
          "nullable": true,
          "primary": true
        },
        {
          "name": "projectId",
          "type": "varchar",
          "nullable": false,
          "references": "projects"
        },
        {
          "name": "name",
          "type": "text",
          "nullable": false
        },
        {
          "name": "appearances",
          "type": "integer",
          "nullable": false
        },
        {
          "name": "consistencyStatus",
          "type": "text",
          "nullable": false
        },
        {
          "name": "lastSeen",
          "type": "text",
          "nullable": true
        },
        {
          "name": "notes",
          "type": "text",
          "nullable": true
        }
      ],
      "relationships": [
        {
          "type": "many-to-one",
          "target": "projects",
          "field": "projectId"
        }
      ]
    },
    {
      "name": "shots",
      "fields": [
        {
          "name": "id",
          "type": "varchar",
          "nullable": true,
          "primary": true
        },
        {
          "name": "sceneId",
          "type": "varchar",
          "nullable": false,
          "references": "scenes"
        },
        {
          "name": "shotNumber",
          "type": "integer",
          "nullable": false
        },
        {
          "name": "shotType",
          "type": "text",
          "nullable": false
        },
        {
          "name": "cameraAngle",
          "type": "text",
          "nullable": false
        },
        {
          "name": "cameraMovement",
          "type": "text",
          "nullable": false
        },
        {
          "name": "lighting",
          "type": "text",
          "nullable": false
        },
        {
          "name": "aiSuggestion",
          "type": "text",
          "nullable": true
        }
      ],
      "relationships": [
        {
          "type": "many-to-one",
          "target": "scenes",
          "field": "sceneId"
        }
      ]
    }
  ],
  "businessLogic": {
    "controllers": [
      "AIController: 0 endpoints ()",
      "AnalysisController: 2 endpoints (runSevenStationsPipeline, getStationDetails)",
      "AuthController: 3 endpoints (signup, login, logout)",
      "CharactersController: 0 endpoints ()",
      "MetricsController: 16 endpoints (getSnapshot, getLatest, getRange...)",
      "ProjectsController: 0 endpoints ()",
      "QueueController: 5 endpoints (getJobStatus, getQueueStats, getSpecificQueueStats...)",
      "RealtimeController: 2 endpoints (getStats, healthCheck)",
      "ScenesController: 0 endpoints ()",
      "ShotsController: 0 endpoints ()"
    ],
    "services": [
      "AnalysisService: 49 methods",
      "AuthService: 34 methods",
      "cache-metrics: 58 methods",
      "CacheService: 114 methods",
      "GeminiService: 76 methods",
      "MetricsAggregatorService: 53 methods",
      "realtime: 85 methods",
      "RedisMetricsService: 59 methods",
      "ResourceMonitorService: 90 methods",
      "sse: 112 methods",
      "websocket: 109 methods"
    ],
    "mainFeatures": [
      "AI Integration (Gemini)",
      "AI-Powered Script Analysis",
      "User Authentication & Authorization",
      "Character Management",
      "System Metrics & Monitoring",
      "Project Management",
      "Background Job Processing",
      "Real-time Communication",
      "Scene Management",
      "Shot Planning",
      "Actorai Arabic",
      "Analysis",
      "Arabic Creative Writing Studio",
      "Arabic Prompt Engineering Studio",
      "Brain Storm Ai",
      "Brainstorm",
      "Breakdown",
      "Cinematography Studio",
      "Development",
      "Directors Studio",
      "Editor",
      "Metrics Dashboard",
      "New",
      "Ui"
    ]
  },
  "discrepancies": [
    "Documentation files exist but were ignored per audit constraints",
    "Uses module-alias for path aliasing (non-standard for TypeScript projects with tsconfig paths)",
    "Uses both PostgreSQL (Drizzle ORM) and MongoDB - dual database system"
  ],
  "metadata": {
    "analyzedAt": "2025-12-23T20:52:35.250Z",
    "projectRoot": "/home/runner/work/the...copy/the...copy",
    "filesAnalyzed": 22
  }
}