# الدور
أنت وكيل ترميز (Senior Frontend Engineer) تعمل داخل مشروع Next.js (App Router) موجود بالفعل. المطلوب تنفيذ تغييرات UI/UX دقيقة “بدون هدم” أي شيء قائم، وبأقل عدد تغييرات ممكن، وبشكل قابل للرجوع (محدد وواضح). لا تغيّر بنية المشروع أو تسميات المسارات إلا إذا طُلب صراحة.

# الهدف النهائي (السلوك المطلوب)
## الصفحة الرئيسية (Home /)
1) تظل أنيميشن الهيرو كما هي حتى لحظة: **تموضع السبع كروت (V-Shape) + ظهور النصوص كما هي في هذا التتابع**.
2) بعد هذه اللحظة **لا يوجد**:
   - نزول/تقليص/Zoom-out لتحويل المشهد إلى Grid 4×4 داخل نفس الصفحة.
   - ولا “اسحب لأسفل لاستكشاف أدوات النسخة”.
3) بدل ذلك:
   - **السبع كروت تُعامل كـ كيان واحد قابل للنقر (Portal)**.
   - عند الضغط على هذا الكيان يتم الانتقال إلى **Route مستقل: `/ui`** (صفحة لانشر التطبيقات).
4) زر **“اضغط على الفيديو”** يجب أن يظهر في نفس صفحة السبع كروت (Home) كـ CTA واضح، ويقوم بفتح فيديو تعريفي/توضيحي (Modal أو Overlay) بدون مغادرة الصفحة.

## صفحة اللانشر (Route: /ui)
1) صفحة `/ui` تعرض Grid 4×4 (إجمالي 16 خلية) بنفس فكرة اللقطة:
   - **الخلية المركزية (2×2)** = كارت كبير بعنوان “النسخة” (اسم التطبيق) + سطر صغير “بس اصلي” (السلوغن).
   - الضغط على الكارت المركزي يفتح مباشرة Route المحرر: **`/editor`**.
2) **الـ 12 خلية المحيطة** تفتح التطبيقات الموجودة حاليًا (Routes الموجودة فعليًا في المشروع)، وأي خلية لتطبيق غير جاهز تكون “قريبًا” (Disabled).
3) العدد الحالي قد يكون أقل من 13 تطبيق مكتمل: المطلوب أن يكون النظام جاهز لاستيعاب زيادة لاحقًا بدون كسر UI.

# قيود صارمة (مهم جدًا)
- لا تحذف “الإهداء” من المشروع، ولا تزيل عناصره. لا تغيّر نصوصه أو وجوده. (قد يتبدل ظهوره بالتايملاين كما هو، لكن لا حذف).
- لا تكسر أنيميشن المراحل 1–5 القائمة. المطلوب فقط إيقاف/إزالة مرحلة التحول إلى Grid الداخلي (Phase 7) واستبدالها بالانتقال إلى `/ui` عند النقر.
- لا تغيّر routing للتطبيقات الأخرى.
- لا تدخل Dependencies جديدة.
- التزم بـ TypeScript + Tailwind الموجودين.
- أي تعديل في GSAP/ScrollTrigger يجب أن يكون محسوبًا لمنع “dead scroll” أو pin طويل بدون أحداث.

# الملفات المستهدفة التي يجب تعديلها
1) `frontend/src/components/HeroAnimation.tsx`
2) `frontend/src/hooks/use-hero-animation.ts`
3) إنشاء Route جديد: `frontend/src/app/(main)/ui/page.tsx`  (مهم: هذا الملف غير موجود حاليًا)
4) إنشاء مكوّن Modal للفيديو: `frontend/src/components/IntroVideoModal.tsx` (أو اسم مكافئ) + أي ستايل بسيط لازم.

---

# الحالة الحالية في الكود (للاسترشاد فقط)
- الكيان القابل للنقر الآن في الهيرو هو:
  - `<Link href="/editor" id="center-unified-entity" ... className="unified-entity">`
- يوجد Grid داخلي داخل `HeroAnimation.tsx` اسمه:
  - `.portfolio-grid-4x4`
- ومرحلة 7 في `use-hero-animation.ts` تقوم بـ:
  - إخفاء الهيدر/CTA
  - تقليص `.frozen-container`
  - إظهار `.portfolio-grid-4x4`
  - تبديل النصوص
  - إظهار `.portfolio-item-container`

المطلوب: تعطيل/إزالة هذه المرحلة تمامًا واستبدالها بانتقال على النقر إلى `/ui`.

---

# خطوات التنفيذ التفصيلية (نفّذ بالترتيب)

## (A) إنشاء Modal فيديو واضح (CTA: اضغط على الفيديو)
1) أنشئ ملف: `frontend/src/components/IntroVideoModal.tsx` بـ `"use client"`.
2) مواصفات المودال:
   - Props:
     - `open: boolean`
     - `onClose: () => void`
     - `videoSrc: string`
     - `title?: string` (اختياري)
   - عند `open=true`:
     - Overlay يغطي الشاشة (dark backdrop).
     - صندوق (Modal) في المنتصف مع:
       - عنوان بسيط (مثلا: “فيديو تعريفي”).
       - عنصر `<video controls autoPlay>` أو `<iframe>` حسب المصدر.
       - زر إغلاق واضح + إغلاق عند الضغط خارج الصندوق + إغلاق عند ESC.
   - Accessibility:
     - `role="dialog" aria-modal="true"`
     - Focus trap بسيط إن أمكن بدون مكتبات: عند الفتح ركّز زر الإغلاق، وعند الإغلاق أعد التركيز لزر CTA.

> استخدم مصدر فيديو placeholder ثابت مؤقتًا (يمكن استخدام نفس pixabay أو أي URL موجود عندك) لكن اجعل `videoSrc` قابلاً للتغيير من HeroAnimation.

## (B) تعديل HeroAnimation: زر الفيديو + تحويل “الكيان” لينتقل إلى /ui
افتح: `frontend/src/components/HeroAnimation.tsx` ونفّذ:

1) عدّل Link الكيان المركزي:
   - غيّر:
     - `href="/editor"`  →  `href="/ui"`
   - غيّر `aria-label` ليعكس السلوك:
     - من “فتح محرر النسخة” → “فتح قائمة أدوات النسخة”
   - لا تغيّر هيكلة الـ V-shape نفسها.

2) عدّل CTA السفلي (`.hero-cta`) ليصبح:
   - زر أساسي: “اضغط على الفيديو”
   - سطر إرشادي صغير (بدل “اسحب لأسفل…”):
     - “اضغط على الكروت لفتح الأدوات”
   - مثال مطلوب (لا تلتزم بالنص حرفيًا إن كان عندك توحيد صياغة، لكن حافظ على المعنى):
     - زر CTA: يفتح الـ Modal
     - النص الإرشادي: يوضح أن النقر على الكروت ينقل للـ Launcher

3) اربط زر CTA بالمودال:
   - أضف state:
     - `const [introOpen, setIntroOpen] = useState(false)`
   - عند الضغط على CTA:
     - `setIntroOpen(true)`
   - أضف `<IntroVideoModal open={introOpen} onClose={()=>setIntroOpen(false)} videoSrc="..."/>` داخل JSX (على مستوى root).

4) مهم جدًا: إصلاح pointer events إن لزم
   - في `HeroAnimation.tsx` يوجد wrapper:
     - `.scene-container ... pointer-events-none`
   - تأكد فعليًا أن النقر على:
     - زر CTA
     - الكيان المركزي (Link)
   يعمل على المتصفح.
   - إن كان `pointer-events-none` يمنع النقر:
     - غيّر `.scene-container` إلى `pointer-events-auto`
     - وابقِ العناصر غير التفاعلية `pointer-events-none` داخليًا (مثل طبقات النص/اللمعات) حتى لا تتعارض.

> لا تغيّر behavior بصريًا، فقط ضمّن أن النقر يعمل.

## (C) تعطيل مرحلة الـ Grid الداخلي (Phase 7) وإزالة “التمرير الطويل الفارغ”
افتح: `frontend/src/hooks/use-hero-animation.ts` ونفّذ:

1) احذف/عطّل كامل مقطع Phase 7 ابتداءً من التعليق:
   - `// ===== المرحلة 7: Grid 4x4 Zoom Out Effect =====`
   وحتى نهاية الجزء الذي يظهر `.portfolio-item-container`.

2) بما أنك أزلت Phase 7:
   - عدّل `ScrollTrigger.end` من:
     - `end: "+=8000"`
     إلى قيمة أصغر تمنع “pin بلا أحداث”.
   - اجعلها تقريبًا:
     - `end: "+=5200"` كبداية
   - ثم اضبطها بدقة حسب طول المراحل الفعلية بعد الحذف (المعيار: بعد انتهاء آخر Tween يجب أن ينتهي الـ Scroll بدون فراغ طويل).

3) لا تُظهر CTA مبكرًا أثناء وجود فيديو الماسك
   - حاليًا CTA يظهر بعد ظهور الهيدر تقريبًا.
   - المطلوب: CTA يظهر عندما تصبح السبع كروت في وضع “Portal جاهز” (بعد Phase 3/5).
   - نفّذ ذلك هكذا:
     - أزِل/انقل Tween إظهار `.hero-cta` من Phase 1
     - واجعله بعد انتهاء:
       - `tl.to(".phase-3-img", ...)` (التموضع النهائي)
       - ثم بعد Phase 5 (لو تريد أن يسبق/يتزامن مع ظهور النص السفلي)
   - اجعل الترتيب:
     - الفيديو يختفي + الهيدر يظهر
     - النصوص تظهر
     - الكروت تتموضع
     - ثم CTA يظهر (زر الفيديو + الإرشاد)

4) لا تلمس Phase 5 الخاصة بتبديل الإهداء/النص السفلي
   - اتركها كما هي (لا حذف ولا إلغاء)، فقط أوقف ما بعد ذلك (Phase 7).

## (D) إنشاء صفحة `/ui` (Launcher Grid) — Route جديد
أنشئ ملف: `frontend/src/app/(main)/ui/page.tsx`

1) يجب أن يكون الملف `"use client"` لأننا سنستخدم responsive values/صور/تفاعلات.
2) ابنِ Grid 4×4 مطابق بصريًا لما كان داخل الهيرو (أو قريب جدًا):
   - Outer container: خلفية سوداء + padding + grid.
   - `grid grid-cols-4 grid-rows-4 gap-2 md:gap-4`
3) **الخلية المركزية (2×2)**:
   - `col-span-2 row-span-2`
   - تكون `<Link href="/editor">`
   - تحتوي:
     - عنوان كبير: “النسخة”
     - سطر صغير: “بس اصلي”
     - تلميح صغير: “افتح المحرر” (اختياري)
   - خلفية: شكل قريب من لقطة الهيرو (يفضل تضمين 7 صور V-shape مصغرة داخل الكارت).
     - أعد استخدام `images` من `@/lib/images` (الـ 0–6 هي صور الـ V-shape).
     - استخدم نفس فكرة الـ `cardPositions` من `heroConfig.getResponsiveValues(window.innerWidth)` لعمل V-shape داخل الكارت (بنفس المنطق الموجود في الهيرو) لكن داخل مساحة الكارت المركزي.
     - إن كانت الحسابات لا تلائم داخل الكارت، طبّق `scale` داخلي (مثلا 0.6) مع `transformOrigin: center`.

4) الـ 12 كارت المحيطة:
   - استخدم نفس mapping الخاص بالـ indices (0–15 باستثناء 5,6,9,10) كما في `HeroAnimation.tsx` لتوحيد السلوك.
   - routes الموجودة في المشروع (موجودة بالفعل كـ page.tsx):
     - `/brain-storm-ai`
     - `/brainstorm`
     - `/breakdown`
     - `/cinematography-studio`
     - `/development`
     - `/directors-studio`
     - `/editor` (لكن لا تضعها هنا لأن المركزي يفتحها)
     - `/metrics-dashboard`
     - `/new`
     - `/analysis`
     - `/arabic-creative-writing-studio`
     - `/arabic-prompt-engineering-studio`
     - `/actorai-arabic`
   - إذا لديك عنصر في mapping يشير لroute غير موجود:
     - اعرضه Disabled:
       - بدون `<Link>`
       - Overlay نص: “قريبًا”
       - `aria-disabled="true"`
       - Cursor: not-allowed
5) الصور:
   - أعد استخدام `ImageWithFallback` من `@/components/figma/ImageWithFallback`
   - وأعد استخدام `images` من `@/lib/images` لأخذ صور لكل كارت.

6) RTL:
   - ضع `dir="rtl"` على الصفحة.

> ملاحظة: وجود `frontend/src/app/(main)/ui/index.ts` لا يمنع إنشاء route. فقط أضف `page.tsx` ولا تلمس `index.ts`.

## (E) ربط Home → /ui
- بعد تغيير Link الكيان المركزي في الهيرو إلى `/ui` تكون عملية الربط تمت.
- لا تستخدم scroll-based transition لهذا الربط: النقر فقط هو الذي يذهب لـ `/ui`.

---

# معايير قبول صارمة (Acceptance Criteria)
1) Home:
   - الأنيميشن يعمل حتى تموضع الكروت كما كان.
   - لا يحدث تقليص/تحول Grid داخل نفس الصفحة.
   - زر “اضغط على الفيديو” يظهر في شاشة السبع كروت (Portal-ready) ويعمل ويفتح مودال فيديو.
   - النقر على السبع كروت (الكيان الموحد) ينقلك إلى `/ui`.
2) /ui:
   - Grid 4×4 ظاهر، والكارت المركزي (2×2) يفتح `/editor`.
   - الـ 12 كارت المحيطة تفتح الـ routes الموجودة.
   - أي كارت لميزة غير جاهزة يظهر “قريبًا” ومُعطّل بدون navigation.
3) لا توجد أخطاء TypeScript أو build.
4) لا تغييرات غير لازمة في التصميم العام، ولا إدخال مكتبات.
5) لا حذف للإهداء أو عناصره من الهيرو.

---

# اختبار وتنفيذ (إلزامي قبل التسليم)
نفّذ محليًا:
- `pnpm -C frontend lint` (أو أمر lint المعتمد)
- `pnpm -C frontend build`
- افتح:
  - `/` وتأكد من النقر والـ modal
  - `/ui` وتأكد من الـ grid والروابط
  - `/editor` يعمل من `/ui`

ثم سلّم:
- قائمة الملفات التي تغيّرت + ملخص سطرين لكل ملف.
- لقطتين (أو وصف دقيق) تؤكد سلوك Home و /ui.
```
